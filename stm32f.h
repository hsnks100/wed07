// stm32f100xxx.h
// Header file for the stm32f100xxx family.  Specifically aimed at the stm32vldiscovery board
// Latest version can be found at http://eleceng.dit.ie/frank/stm32vldiscovery/stm32f100xxx.h
// Written by Frank Duignan
// Macros to reduce typing later on
#define  REGISTER_32(ADDRESS) (*((volatile unsigned int *)(ADDRESS)))
#define  REGISTER_16(ADDRESS) (*((volatile unsigned short *)(ADDRESS)))
// Macros to enable/disable global interrupts
#define enable_interrupts() asm(" cpsie i ")
#define disable_interrupts() asm(" cpsid i ")
// Some useful bitmasks

#define BIT0 (1 << 0)
#define BIT1 (1 << 1)
#define BIT2 (1 << 2)
#define BIT3 (1 << 3)
#define BIT4 (1 << 4)
#define BIT5 (1 << 5)
#define BIT6 (1 << 6)
#define BIT7 (1 << 7)
#define BIT8 (1 << 8)
#define BIT9 (1 << 9)
#define BIT10 (1 << 10)
#define BIT11 (1 << 11)
#define BIT12 (1 << 12)
#define BIT13 (1 << 13)
#define BIT14 (1 << 14)
#define BIT15 (1 << 15)
#define BIT16 (1 << 16)
#define BIT17 (1 << 17)
#define BIT18 (1 << 18)
#define BIT19 (1 << 19)
#define BIT20 (1 << 20)
#define BIT21 (1 << 21)
#define BIT22 (1 << 22)
#define BIT23 (1 << 23)
#define BIT24 (1 << 24)
#define BIT25 (1 << 25)
#define BIT26 (1 << 26)
#define BIT27 (1 << 27)
#define BIT28 (1 << 28)
#define BIT29 (1 << 29)
#define BIT30 (1 << 30)
#define BIT31 (1 << 31)

// Boundary addresses peripherals
// APB1 devices
#define TIM2_BASE 	0x40000000
#define TIM3_BASE 	0x40000400
#define TIM4_BASE 	0x40000800
#define TIM6_BASE 	0x40001000
#define TIM7_BASE 	0x40001400
#define RTC_BASE  	0x40002800
#define WWDG_BASE 	0x40002c00
#define IWDG_BASE 	0x40003000
#define SPI2_BASE 	0x40003800
#define USART2_BASE 0x40004400
#define USART3_BASE 0x40004800
#define I2C1_BASE	  0x40005400
#define I2C2_BASE 	0x40005c00
#define BKP_BASE 	  0x40006c00
#define PWR_BASE	 	0x40007000
#define DAC_BASE		0x40007400
#define CEC_BASE 	  0x40007800
#define AFIO_BASE 	0x40010000
// APB2 devices
#define EXTI_BASE		0x40010400
#define GPIOA_BASE	0x40010800
#define GPIOB_BASE  0x40010c00
#define GPIOC_BASE  0x40011000
#define GPIOD_BASE  0x40011400
#define GPIOE_BASE  0x40011800
#define ADC1_BASE   0x40012400
#define TIM1_BASE 	0x40012c00
#define SPI1_BASE		0x40013000
#define USART1_BASE 0x40013800
#define TIM15_BASE	0x40014000
#define TIM16_BASE  0x40014400
#define TIM17_BASE	0x40014800
// AHB devices
#define DMA_BASE		0x40020000
#define RCC_BASE	 	0x40021000
#define FLASH_BASE 	0x40022000
#define CRC_BASE		0x40023000

#define FSMC_BASE		0xa0000000

// Peripheral register definitions
#define CRC_DR 			REGISTER_32(CRC_BASE + 0x00 )
#define CRC_IDR			REGISTER_32(CRC_BASE + 0x04 )
#define CRC_CR			REGISTER_32(CRC_BASE + 0x08 )

#define PWR_CR			REGISTER_32(PWR_BASE + 0x00 )
#define PWR_CSR			REGISTER_32(PWR_BASE + 0x04 )

#define BKP_DR1			REGISTER_32(BKP_BASE + 0x04 )
#define BKP_DR2		  REGISTER_32(BKP_BASE + 0x08 )
#define BKP_DR3			REGISTER_32(BKP_BASE + 0x0c )
#define BKP_DR4			REGISTER_32(BKP_BASE + 0x10 )
#define BKP_DR5			REGISTER_32(BKP_BASE + 0x14 )
#define BKP_DR6			REGISTER_32(BKP_BASE + 0x18 )
#define BKP_DR7			REGISTER_32(BKP_BASE + 0x1c )
#define BKP_DR8			REGISTER_32(BKP_BASE + 0x20 )
#define BKP_DR9			REGISTER_32(BKP_BASE + 0x24 )
#define BKP_DR10		REGISTER_32(BKP_BASE + 0x28 )
#define BKP_RTCCR		REGISTER_32(BKP_BASE + 0x2c )
#define BKP_CR			REGISTER_32(BKP_BASE + 0x30 )
#define BKP_CSR		  REGISTER_32(BKP_BASE + 0x34 )

#define RCC_CR		 	REGISTER_32(RCC_BASE + 0x00 )
#define RCC_CFGR		REGISTER_32(RCC_BASE + 0x04 )
#define RCC_CIR		  REGISTER_32(RCC_BASE + 0x08 )
#define RCC_APB2RSTR REGISTER_32(RCC_BASE + 0x0c)
#define RCC_APB1RSTR REGISTER_32(RCC_BASE + 0x10)
#define RCC_AHBENR	REGISTER_32(RCC_BASE + 0x14 )
#define RCC_APB2ENR	REGISTER_32(RCC_BASE + 0x18 )
#define RCC_APB1ENR	REGISTER_32(RCC_BASE + 0x1c )
#define RCC_BDCR		REGISTER_32(RCC_BASE + 0x20 )
#define RCC_CSR			REGISTER_32(RCC_BASE + 0x24 )
#define RCC_CFGR2		REGISTER_32(RCC_BASE + 0x28 )

#define GPIOA_CRL   REGISTER_32(GPIOA_BASE + 0x00 )
#define GPIOA_CRH   REGISTER_32(GPIOA_BASE + 0x04 )
#define GPIOA_IDR   REGISTER_32(GPIOA_BASE + 0x08 )
#define GPIOA_ODR   REGISTER_32(GPIOA_BASE + 0x0c )
#define GPIOA_BSRR  REGISTER_32(GPIOA_BASE + 0x10 )
#define GPIOA_BRR   REGISTER_32(GPIOA_BASE + 0x14 )
#define GPIOA_LCKR  REGISTER_32(GPIOA_BASE + 0x18 )

#define GPIOB_CRL   REGISTER_32(GPIOB_BASE + 0x00 )
#define GPIOB_CRH   REGISTER_32(GPIOB_BASE + 0x04 )
#define GPIOB_IDR   REGISTER_32(GPIOB_BASE + 0x08 )
#define GPIOB_ODR   REGISTER_32(GPIOB_BASE + 0x0c )
#define GPIOB_BSRR  REGISTER_32(GPIOB_BASE + 0x10 )
#define GPIOB_BRR   REGISTER_32(GPIOB_BASE + 0x14 )
#define GPIOB_LCKR  REGISTER_32(GPIOB_BASE + 0x18 )

#define GPIOC_CRL   REGISTER_32(GPIOC_BASE + 0x00 )
#define GPIOC_CRH   REGISTER_32(GPIOC_BASE + 0x04 )
#define GPIOC_IDR   REGISTER_32(GPIOC_BASE + 0x08 )
#define GPIOC_ODR   REGISTER_32(GPIOC_BASE + 0x0c )
#define GPIOC_BSRR  REGISTER_32(GPIOC_BASE + 0x10 )
#define GPIOC_BRR   REGISTER_32(GPIOC_BASE + 0x14 )
#define GPIOC_LCKR  REGISTER_32(GPIOC_BASE + 0x18 )

#define GPIOD_CRL   REGISTER_32(GPIOD_BASE + 0x00 )
#define GPIOD_CRH   REGISTER_32(GPIOD_BASE + 0x04 )
#define GPIOD_IDR   REGISTER_32(GPIOD_BASE + 0x08 )
#define GPIOD_ODR   REGISTER_32(GPIOD_BASE + 0x0c )
#define GPIOD_BSRR  REGISTER_32(GPIOD_BASE + 0x10 )
#define GPIOD_BRR   REGISTER_32(GPIOD_BASE + 0x14 )
#define GPIOD_LCKR  REGISTER_32(GPIOD_BASE + 0x18 )

#define GPIOE_CRL   REGISTER_32(GPIOE_BASE + 0x00 )
#define GPIOE_CRH   REGISTER_32(GPIOE_BASE + 0x04 )
#define GPIOE_IDR   REGISTER_32(GPIOE_BASE + 0x08 )
#define GPIOE_ODR   REGISTER_32(GPIOE_BASE + 0x0c )
#define GPIOE_BSRR  REGISTER_32(GPIOE_BASE + 0x10 )
#define GPIOE_BRR   REGISTER_32(GPIOE_BASE + 0x14 )
#define GPIOE_LCKR  REGISTER_32(GPIOE_BASE + 0x18 )

#define AFIO_ECVR	  REGISTER_32( AFIO_BASE + 0x00 )
#define AFIO_MAPR	  REGISTER_32( AFIO_BASE + 0x04 )
#define AFIO_EXTICR1 REGISTER_32(AFIO_BASE + 0x08 )
#define AFIO_EXTICR2 REGISTER_32(AFIO_BASE + 0x0c )
#define AFIO_EXTICR3 REGISTER_32(AFIO_BASE + 0x10 )
#define AFIO_EXTICR4 REGISTER_32(AFIO_BASE + 0x14 )
#define AFIO_MAPR2  REGISTER_32( AFIO_BASE + 0x1c )

#define EXTI_IMR		REGISTER_32( EXTI_BASE + 0x00 )
#define EXTI_EMR		REGISTER_32( EXTI_BASE + 0x04 )
#define EXTI_RTSR 	REGISTER_32( EXTI_BASE + 0x08 )
#define EXTI_FTSR		REGISTER_32( EXTI_BASE + 0x0c )
#define EXTI_SWIER	REGISTER_32( EXTI_BASE + 0x10 )
#define EXTI_PR		  REGISTER_32( EXTI_BASE + 0x14 )

#define DMA_ISR 		REGISTER_32( DMA_BASE + 0x00 )
#define DMA_IFCR 		REGISTER_32( DMA_BASE + 0x04 )
#define DMA_CCR1 		REGISTER_32( DMA_BASE + 0x08 )
#define DMA_CNDTR1	REGISTER_32( DMA_BASE + 0x0c )
#define DMA_CPAR1 	REGISTER_32( DMA_BASE + 0x10 )
#define DMA_CMAR1 	REGISTER_32( DMA_BASE + 0x14 )
#define DMA_CCR2 		REGISTER_32( DMA_BASE + 0x1c )
#define DMA_CNDTR2	REGISTER_32( DMA_BASE + 0x20 )
#define DMA_CPAR2 	REGISTER_32( DMA_BASE + 0x24 )
#define DMA_CMAR2		REGISTER_32( DMA_BASE + 0x28 )
#define DMA_CCR3 		REGISTER_32( DMA_BASE + 0x30 )
#define DMA_CNDTR3	REGISTER_32( DMA_BASE + 0x34 )
#define DMA_CPAR3 	REGISTER_32( DMA_BASE + 0x38 )
#define DMA_CMAR3		REGISTER_32( DMA_BASE + 0x3c )
#define DMA_CCR4 		REGISTER_32( DMA_BASE + 0x44 )
#define DMA_CNDTR4 	REGISTER_32( DMA_BASE + 0x48 )
#define DMA_CPAR4 	REGISTER_32( DMA_BASE + 0x4c )
#define DMA_CMAR4 	REGISTER_32( DMA_BASE + 0x50 )
#define DMA_CCR5 		REGISTER_32( DMA_BASE + 0x58 )
#define DMA_CDNTR5	REGISTER_32( DMA_BASE + 0x5c )
#define DMA_CPAR5 	REGISTER_32( DMA_BASE + 0x60 )
#define DMA_CMAR5 	REGISTER_32( DMA_BASE + 0x64 )
#define DMA_CCR6 		REGISTER_32( DMA_BASE + 0x6c )
#define DMA_CNDTR6	REGISTER_32( DMA_BASE + 0x70 )
#define DMA_CPAR6		REGISTER_32( DMA_BASE + 0x74 )
#define DMA_CMAR6 	REGISTER_32( DMA_BASE + 0x78 )	
#define DMA_CCR7	  REGISTER_32( DMA_BASE + 0x80 )
#define DMA_CNDTR7  REGISTER_32( DMA_BASE + 0x84 )
#define DMA_CPAR7	  REGISTER_32( DMA_BASE + 0x88 )
#define DMA_CMAR7	  REGISTER_32( DMA_BASE + 0x8c )

#define ADC_SR			REGISTER_32( ADC1_BASE + 0x00 )
#define ADC_CR1			REGISTER_32( ADC1_BASE + 0x04 )
#define ADC_CR2			REGISTER_32( ADC1_BASE + 0x08 )
#define ADC_SMPR1 	REGISTER_32( ADC1_BASE + 0x0c )
#define ADC_SMPR2		REGISTER_32( ADC1_BASE + 0x10 )
#define ADC_JOFR1		REGISTER_32( ADC1_BASE + 0x14 )
#define ADC_JOFR2 	REGISTER_32( ADC1_BASE + 0x18 )
#define ADC_JOFR3 	REGISTER_32( ADC1_BASE + 0x1c )
#define ADC_JOFR4 	REGISTER_32( ADC1_BASE + 0x20 )
#define ADC_HTR   	REGISTER_32( ADC1_BASE + 0x24 )
#define ADC_LTR   	REGISTER_32( ADC1_BASE + 0x28 )
#define ADC_SQR1   	REGISTER_32( ADC1_BASE + 0x2c )
#define ADC_SQR2   	REGISTER_32( ADC1_BASE + 0x30 )
#define ADC_SQR3   	REGISTER_32( ADC1_BASE + 0x34 )
#define ADC_JSQR   	REGISTER_32( ADC1_BASE + 0x38 )
#define ADC_JDR1   	REGISTER_32( ADC1_BASE + 0x3c )
#define ADC_JDR2   	REGISTER_32( ADC1_BASE + 0x40 )
#define ADC_JDR3   	REGISTER_32( ADC1_BASE + 0x44 )
#define ADC_JDR4   	REGISTER_32( ADC1_BASE + 0x48 )
#define ADC_DR    	REGISTER_32( ADC1_BASE + 0x4c )

#define DAC_CR			REGISTER_32( DAC_BASE + 0x00 )
#define DAC_SWTRIGR	REGISTER_32( DAC_BASE + 0x04 )
#define DAC_DHR12R1 REGISTER_32( DAC_BASE + 0x08 )
#define DAC_DHR12L1 REGISTER_32( DAC_BASE + 0x0c )
#define DAC_DHR8R1  REGISTER_32( DAC_BASE + 0x10 )
#define DAC_DHR12R2 REGISTER_32( DAC_BASE + 0x14 )
#define DAC_DHR12L2 REGISTER_32( DAC_BASE + 0x18 )
#define DAC_DHR8R2  REGISTER_32( DAC_BASE + 0x1c )
#define DAC_DHR12RD REGISTER_32( DAC_BASE + 0x20 )
#define DAC_DHR12LD REGISTER_32( DAC_BASE + 0x24 )
#define DAC_DHR8RD  REGISTER_32( DAC_BASE + 0x28 )
#define DAC_DOR1    REGISTER_32( DAC_BASE + 0x2c )
#define DAC_DOR2    REGISTER_32( DAC_BASE + 0x30 )
#define DAC_SR      REGISTER_32( DAC_BASE + 0x34 )

// Timer 1
#define TIM1_CR1		REGISTER_16(TIM1_BASE + 0x00 )
#define TIM1_CR2		REGISTER_16(TIM1_BASE + 0x04 )
#define TIM1_SMCR		REGISTER_16(TIM1_BASE + 0x08 )
#define TIM1_DIER		REGISTER_16(TIM1_BASE + 0x0c )
#define TIM1_SR 		REGISTER_16(TIM1_BASE + 0x10 )
#define TIM1_EGR		REGISTER_16(TIM1_BASE + 0x14 )
#define TIM1_CCMR1	REGISTER_16(TIM1_BASE + 0x18 )
#define TIM1_CCMR2	REGISTER_16(TIM1_BASE + 0x1c )
#define TIM1_CCER		REGISTER_16(TIM1_BASE + 0x20 )
#define TIM1_CNT		REGISTER_16(TIM1_BASE + 0x24 )
#define TIM1_PSC		REGISTER_16(TIM1_BASE + 0x28 )
#define TIM1_ARR		REGISTER_16(TIM1_BASE + 0x2c )
#define TIM1_RCR		REGISTER_16(TIM1_BASE + 0x30 )
#define TIM1_CCR1		REGISTER_16(TIM1_BASE + 0x34 )
#define TIM1_CCR2		REGISTER_16(TIM1_BASE + 0x38 )
#define TIM1_CCR3		REGISTER_16(TIM1_BASE + 0x3c )
#define TIM1_CCR4		REGISTER_16(TIM1_BASE + 0x40 )
#define TIM1_BDTR		REGISTER_16(TIM1_BASE + 0x44 )
#define TIM1_DCR		REGISTER_16(TIM1_BASE + 0x48 )
#define TIM1_DMAR		REGISTER_16(TIM1_BASE + 0x4c )

// Timer 2
#define TIM2_CR1		REGISTER_16(TIM2_BASE + 0x00 )
#define TIM2_CR2		REGISTER_16(TIM2_BASE + 0x04 )
#define TIM2_SMCR		REGISTER_16(TIM2_BASE + 0x08 )
#define TIM2_DIER		REGISTER_16(TIM2_BASE + 0x0c )
#define TIM2_SR 		REGISTER_16(TIM2_BASE + 0x10 )
#define TIM2_EGR		REGISTER_16(TIM2_BASE + 0x14 )
#define TIM2_CCMR1	REGISTER_16(TIM2_BASE + 0x18 )
#define TIM2_CCMR2	REGISTER_16(TIM2_BASE + 0x1c )
#define TIM2_CCER		REGISTER_16(TIM2_BASE + 0x20 )
#define TIM2_CNT		REGISTER_16(TIM2_BASE + 0x24 )
#define TIM2_PSC		REGISTER_16(TIM2_BASE + 0x28 )
#define TIM2_ARR		REGISTER_16(TIM2_BASE + 0x2c )

#define TIM2_CCR1		REGISTER_16(TIM2_BASE + 0x34 )
#define TIM2_CCR2		REGISTER_16(TIM2_BASE + 0x38 )
#define TIM2_CCR3		REGISTER_16(TIM2_BASE + 0x3c )
#define TIM2_CCR4		REGISTER_16(TIM2_BASE + 0x40 )

#define TIM2_DCR		REGISTER_16(TIM2_BASE + 0x48 )
#define TIM2_DMAR		REGISTER_16(TIM2_BASE + 0x4c )

// Timer 3
#define TIM3_CR1		REGISTER_16(TIM3_BASE + 0x00 )
#define TIM3_CR2		REGISTER_16(TIM3_BASE + 0x04 )
#define TIM3_SMCR		REGISTER_16(TIM3_BASE + 0x08 )
#define TIM3_DIER		REGISTER_16(TIM3_BASE + 0x0c )
#define TIM3_SR 		REGISTER_16(TIM3_BASE + 0x10 )
#define TIM3_EGR		REGISTER_16(TIM3_BASE + 0x14 )
#define TIM3_CCMR1	REGISTER_16(TIM3_BASE + 0x18 )
#define TIM3_CCMR2	REGISTER_16(TIM3_BASE + 0x1c )
#define TIM3_CCER		REGISTER_16(TIM3_BASE + 0x20 )
#define TIM3_CNT		REGISTER_16(TIM3_BASE + 0x24 )
#define TIM3_PSC		REGISTER_16(TIM3_BASE + 0x28 )
#define TIM3_ARR		REGISTER_16(TIM3_BASE + 0x2c )

#define TIM3_CCR1		REGISTER_16(TIM3_BASE + 0x34 )
#define TIM3_CCR2		REGISTER_16(TIM3_BASE + 0x38 )
#define TIM3_CCR3		REGISTER_16(TIM3_BASE + 0x3c )
#define TIM3_CCR4		REGISTER_16(TIM3_BASE + 0x40 )

#define TIM3_DCR		REGISTER_16(TIM3_BASE + 0x48 )
#define TIM3_DMAR		REGISTER_16(TIM3_BASE + 0x4c )

// Timer 4
#define TIM4_CR1		REGISTER_16(TIM4_BASE + 0x00 )
#define TIM4_CR2		REGISTER_16(TIM4_BASE + 0x04 )
#define TIM4_SMCR		REGISTER_16(TIM4_BASE + 0x08 )
#define TIM4_DIER		REGISTER_16(TIM4_BASE + 0x0c )
#define TIM4_SR 		REGISTER_16(TIM4_BASE + 0x10 )
#define TIM4_EGR		REGISTER_16(TIM4_BASE + 0x14 )
#define TIM4_CCMR1	REGISTER_16(TIM4_BASE + 0x18 )
#define TIM4_CCMR2	REGISTER_16(TIM4_BASE + 0x1c )
#define TIM4_CCER		REGISTER_16(TIM4_BASE + 0x20 )
#define TIM4_CNT		REGISTER_16(TIM4_BASE + 0x24 )
#define TIM4_PSC		REGISTER_16(TIM4_BASE + 0x28 )
#define TIM4_ARR		REGISTER_16(TIM4_BASE + 0x2c )

#define TIM4_CCR1		REGISTER_16(TIM4_BASE + 0x34 )
#define TIM4_CCR2		REGISTER_16(TIM4_BASE + 0x38 )
#define TIM4_CCR3		REGISTER_16(TIM4_BASE + 0x3c )
#define TIM4_CCR4		REGISTER_16(TIM4_BASE + 0x40 )

#define TIM4_DCR		REGISTER_16(TIM4_BASE + 0x48 )
#define TIM4_DMAR		REGISTER_16(TIM4_BASE + 0x4c )

// Timer 5
#define TIM5_CR1		REGISTER_16(TIM5_BASE + 0x00 )
#define TIM5_CR2		REGISTER_16(TIM5_BASE + 0x04 )
#define TIM5_SMCR		REGISTER_16(TIM5_BASE + 0x08 )
#define TIM5_DIER		REGISTER_16(TIM5_BASE + 0x0c )
#define TIM5_SR 		REGISTER_16(TIM5_BASE + 0x10 )
#define TIM5_EGR		REGISTER_16(TIM5_BASE + 0x14 )
#define TIM5_CCMR1	REGISTER_16(TIM5_BASE + 0x18 )
#define TIM5_CCMR2	REGISTER_16(TIM5_BASE + 0x1c )
#define TIM5_CCER		REGISTER_16(TIM5_BASE + 0x20 )
#define TIM5_CNT		REGISTER_16(TIM5_BASE + 0x24 )
#define TIM5_PSC		REGISTER_16(TIM5_BASE + 0x28 )
#define TIM5_ARR		REGISTER_16(TIM5_BASE + 0x2c )

#define TIM5_CCR1		REGISTER_16(TIM5_BASE + 0x34 )
#define TIM5_CCR2		REGISTER_16(TIM5_BASE + 0x38 )
#define TIM5_CCR3		REGISTER_16(TIM5_BASE + 0x3c )
#define TIM5_CCR4		REGISTER_16(TIM5_BASE + 0x40 )

#define TIM5_DCR		REGISTER_16(TIM5_BASE + 0x48 )
#define TIM5_DMAR		REGISTER_16(TIM5_BASE + 0x4c )


// Timer 12
#define TIM12_CR1		REGISTER_16(TIM12_BASE + 0x00 )
#define TIM12_CR2		REGISTER_16(TIM12_BASE + 0x04 )
#define TIM12_SMCR	REGISTER_16(TIM12_BASE + 0x08 )
#define TIM12_DIER	REGISTER_16(TIM12_BASE + 0x0c )
#define TIM12_SR 		REGISTER_16(TIM12_BASE + 0x10 )
#define TIM12_EGR		REGISTER_16(TIM12_BASE + 0x14 )
#define TIM12_CCMR1	REGISTER_16(TIM12_BASE + 0x18 )

#define TIM12_CCER	REGISTER_16(TIM12_BASE + 0x20 )
#define TIM12_CNT		REGISTER_16(TIM12_BASE + 0x24 )
#define TIM12_PSC		REGISTER_16(TIM12_BASE + 0x28 )
#define TIM12_ARR		REGISTER_16(TIM12_BASE + 0x2c )

#define TIM12_CCR1	REGISTER_16(TIM12_BASE + 0x34 )
#define TIM12_CCR2	REGISTER_16(TIM12_BASE + 0x38 )


// Timer 13
#define TIM13_CR1		REGISTER_16(TIM13_BASE + 0x00 )

#define TIM13_SMCR	REGISTER_16(TIM13_BASE + 0x08 )
#define TIM13_DIER	REGISTER_16(TIM13_BASE + 0x0c )
#define TIM13_SR 		REGISTER_16(TIM13_BASE + 0x10 )
#define TIM13_EGR		REGISTER_16(TIM13_BASE + 0x14 )
#define TIM13_CCMR1	REGISTER_16(TIM13_BASE + 0x18 )

#define TIM13_CCER	REGISTER_16(TIM13_BASE + 0x20 )
#define TIM13_CNT		REGISTER_16(TIM13_BASE + 0x24 )
#define TIM13_PSC		REGISTER_16(TIM13_BASE + 0x28 )
#define TIM13_ARR		REGISTER_16(TIM13_BASE + 0x2c )

#define TIM13_CCR1	REGISTER_16(TIM13_BASE + 0x34 )


// Timer 14
#define TIM14_CR1		REGISTER_16(TIM14_BASE + 0x00 )

#define TIM14_SMCR	REGISTER_16(TIM14_BASE + 0x08 )
#define TIM14_DIER	REGISTER_16(TIM14_BASE + 0x0c )
#define TIM14_SR 		REGISTER_16(TIM14_BASE + 0x10 )
#define TIM14_EGR		REGISTER_16(TIM14_BASE + 0x14 )
#define TIM14_CCMR1	REGISTER_16(TIM14_BASE + 0x18 )

#define TIM14_CCER	REGISTER_16(TIM14_BASE + 0x20 )
#define TIM14_CNT		REGISTER_16(TIM14_BASE + 0x24 )
#define TIM14_PSC		REGISTER_16(TIM14_BASE + 0x28 )
#define TIM14_ARR		REGISTER_16(TIM14_BASE + 0x2c )

#define TIM14_CCR1	REGISTER_16(TIM14_BASE + 0x34 )

// Timer 15
#define TIM15_CR1		REGISTER_16(TIM15_BASE + 0x00 )
#define TIM15_CR2		REGISTER_16(TIM15_BASE + 0x04 )
#define TIM15_SMCR	REGISTER_16(TIM15_BASE + 0x08 )
#define TIM15_DIER	REGISTER_16(TIM15_BASE + 0x0c )
#define TIM15_SR 		REGISTER_16(TIM15_BASE + 0x10 )
#define TIM15_EGR		REGISTER_16(TIM15_BASE + 0x14 )
#define TIM15_CCMR1	REGISTER_16(TIM15_BASE + 0x18 )

#define TIM15_CCER	REGISTER_16(TIM15_BASE + 0x20 )
#define TIM15_CNT		REGISTER_16(TIM15_BASE + 0x24 )
#define TIM15_PSC		REGISTER_16(TIM15_BASE + 0x28 )
#define TIM15_ARR		REGISTER_16(TIM15_BASE + 0x2c )
#define TIM15_RCR		REGISTER_16(TIM15_BASE + 0x30 )
#define TIM15_CCR1	REGISTER_16(TIM15_BASE + 0x34 )
#define TIM15_CCR2	REGISTER_16(TIM15_BASE + 0x38 )

#define TIM15_BDTR	REGISTER_16(TIM15_BASE + 0x44 )
#define TIM15_DCR		REGISTER_16(TIM15_BASE + 0x48 )
#define TIM15_DMAR	REGISTER_16(TIM15_BASE + 0x4c )

// Timer 16
// Timer 16
#define TIM16_CR1		REGISTER_16(TIM16_BASE + 0x00 )
#define TIM16_CR2		REGISTER_16(TIM16_BASE + 0x04 )

#define TIM16_DIER	REGISTER_16(TIM16_BASE + 0x0c )
#define TIM16_SR 		REGISTER_16(TIM16_BASE + 0x10 )
#define TIM16_EGR		REGISTER_16(TIM16_BASE + 0x14 )
#define TIM16_CCMR1	REGISTER_16(TIM16_BASE + 0x18 )

#define TIM16_CCER	REGISTER_16(TIM16_BASE + 0x20 )
#define TIM16_CNT		REGISTER_16(TIM16_BASE + 0x24 )
#define TIM16_PSC		REGISTER_16(TIM16_BASE + 0x28 )
#define TIM16_ARR		REGISTER_16(TIM16_BASE + 0x2c )
#define TIM16_RCR		REGISTER_16(TIM16_BASE + 0x30 )
#define TIM16_CCR1	REGISTER_16(TIM16_BASE + 0x34 )

#define TIM16_BDTR	REGISTER_16(TIM16_BASE + 0x44 )
#define TIM16_DCR		REGISTER_16(TIM16_BASE + 0x48 )
#define TIM16_DMAR	REGISTER_16(TIM16_BASE + 0x4c )


// Timer 17
#define TIM17_CR1		REGISTER_16(TIM17_BASE + 0x00 )
#define TIM17_CR2		REGISTER_16(TIM17_BASE + 0x04 )

#define TIM17_DIER	REGISTER_16(TIM17_BASE + 0x0c )
#define TIM17_SR 		REGISTER_16(TIM17_BASE + 0x10 )
#define TIM17_EGR		REGISTER_16(TIM17_BASE + 0x14 )
#define TIM17_CCMR1	REGISTER_16(TIM17_BASE + 0x18 )

#define TIM17_CCER	REGISTER_16(TIM17_BASE + 0x20 )
#define TIM17_CNT		REGISTER_16(TIM17_BASE + 0x24 )
#define TIM17_PSC		REGISTER_16(TIM17_BASE + 0x28 )
#define TIM17_ARR		REGISTER_16(TIM17_BASE + 0x2c )
#define TIM17_RCR		REGISTER_16(TIM17_BASE + 0x30 )
#define TIM17_CCR1	REGISTER_16(TIM17_BASE + 0x34 )

#define TIM17_BDTR	REGISTER_16(TIM17_BASE + 0x44 )
#define TIM17_DCR		REGISTER_16(TIM17_BASE + 0x48 )
#define TIM17_DMAR	REGISTER_16(TIM17_BASE + 0x4c )

// Timer 6
#define TIM6_CR1		REGISTER_16(TIM6_BASE + 0x00 )
#define TIM6_CR2		REGISTER_16(TIM6_BASE + 0x04 )

#define TIM6_DIER		REGISTER_16(TIM6_BASE + 0x0c )
#define TIM6_SR 		REGISTER_16(TIM6_BASE + 0x10 )
#define TIM6_EGR		REGISTER_16(TIM6_BASE + 0x14 )

#define TIM6_CNT		REGISTER_16(TIM6_BASE + 0x24 )
#define TIM6_PSC		REGISTER_16(TIM6_BASE + 0x28 )
#define TIM6_ARR		REGISTER_16(TIM6_BASE + 0x2c )

// Timer 7
#define TIM7_CR1		REGISTER_16(TIM7_BASE + 0x00 )
#define TIM7_CR2		REGISTER_16(TIM7_BASE + 0x04 )

#define TIM7_DIER		REGISTER_16(TIM7_BASE + 0x0c )
#define TIM7_SR 		REGISTER_16(TIM7_BASE + 0x10 )
#define TIM7_EGR		REGISTER_16(TIM7_BASE + 0x14 )

#define TIM7_CNT		REGISTER_16(TIM7_BASE + 0x24 )
#define TIM7_PSC		REGISTER_16(TIM7_BASE + 0x28 )
#define TIM7_ARR		REGISTER_16(TIM7_BASE + 0x2c )

// RTC
#define RTC_CRH			REGISTER_16( RTC_BASE + 0x00 )
#define RTC_CRL			REGISTER_16( RTC_BASE + 0x04 )
#define RTC_PRLH		REGISTER_16( RTC_BASE + 0x08 )
#define RTC_PRLL		REGISTER_16( RTC_BASE + 0x0c )
#define RTC_DIVH		REGISTER_16( RTC_BASE + 0x10 )
#define RTC_DIVL		REGISTER_16( RTC_BASE + 0x14 )
#define RTC_CNTH		REGISTER_16( RTC_BASE + 0x18 )
#define RTC_CNTL		REGISTER_16( RTC_BASE + 0x1c )
#define RTC_ALRH		REGISTER_16( RTC_BASE + 0x20 )
#define RTC_ALRL		REGISTER_16( RTC_BASE + 0x24 )

// IWDG
#define IWDG_KR			REGISTER_16(IWDG_BASE + 0x00 )
#define IWDG_PR			REGISTER_16(IWDG_BASE + 0x04 )
#define IWDG_RLR		REGISTER_16(IWDG_BASE + 0x08 )
#define IWDG_SD			REGISTER_16(IWDG_BASE + 0x0c )

// WWDG
#define WWDG_CR			REGISTER_16(WWDG_BASE + 0x00 )
#define WWDG_CFR		REGISTER_16(WWDG_BASE + 0x04 )
#define WWDG_SR			REGISTER_16(WWDG_BASE + 0x08 )

// FSMC
#define FSMC_BCR1		REGISTER_32(FSMC_BASE + 0x00 )
#define FSMC_BCR2		REGISTER_32(FSMC_BASE + 0x08 )
#define FSMC_BCR3		REGISTER_32(FSMC_BASE + 0x10 )
#define FSMC_BCR4		REGISTER_32(FSMC_BASE + 0x18 )
#define FSMC_BTR1		REGISTER_32(FSMC_BASE + 0x04 )
#define FSMC_BTR2		REGISTER_32(FSMC_BASE + 0x0c )
#define FSMC_BTR3		REGISTER_32(FSMC_BASE + 0x14 )
#define FSMC_BTR4		REGISTER_32(FSMC_BASE + 0x1c )
#define FSMC_BWTR1	REGISTER_32(FSMC_BASE +0x104 )
#define FSMC_BWTR2	REGISTER_32(FSMC_BASE +0x10c )
#define FSMC_BWTR3	REGISTER_32(FSMC_BASE +0x114 )
#define FSMC_BWTR4	REGISTER_32(FSMC_BASE +0x11c )

// SPI1
#define SPI1_CR1		REGISTER_16(SPI1_BASE + 0x00 )
#define SPI1_CR2		REGISTER_16(SPI1_BASE + 0x04 )
#define SPI1_SR 		REGISTER_16(SPI1_BASE + 0x08 )
#define SPI1_DR 		REGISTER_16(SPI1_BASE + 0x0c )
#define SPI1_CRCPR	REGISTER_16(SPI1_BASE + 0x10 )
#define SPI1_RXCRCR	REGISTER_16(SPI1_BASE + 0x14 )
#define SPI1_TXCRCR	REGISTER_16(SPI1_BASE + 0x18 )

// SPI2
#define SPI2_CR1		REGISTER_16(SPI2_BASE + 0x00 )
#define SPI2_CR2		REGISTER_16(SPI2_BASE + 0x04 )
#define SPI2_SR 		REGISTER_16(SPI2_BASE + 0x08 )
#define SPI2_DR 		REGISTER_16(SPI2_BASE + 0x0c )
#define SPI2_CRCPR	REGISTER_16(SPI2_BASE + 0x10 )
#define SPI2_RXCRCR	REGISTER_16(SPI2_BASE + 0x14 )
#define SPI2_TXCRCR	REGISTER_16(SPI2_BASE + 0x18 )

// I2C1
#define I2C1_CR1		REGISTER_16(I2C1_BASE + 0x00 )
#define I2C1_CR2		REGISTER_16(I2C1_BASE + 0x04 )
#define I2C1_OAR1		REGISTER_16(I2C1_BASE + 0x08 )
#define I2C1_OAR2		REGISTER_16(I2C1_BASE + 0x0c )
#define I2C1_DR 		REGISTER_16(I2C1_BASE + 0x10 )
#define I2C1_SR1		REGISTER_16(I2C1_BASE + 0x14 )
#define I2C1_SR2		REGISTER_16(I2C1_BASE + 0x18 )
#define I2C1_CCR		REGISTER_16(I2C1_BASE + 0x1c )
#define I2C1_TRISE	REGISTER_16(I2C1_BASE + 0x20 )

// I2C2
#define I2C2_CR1		REGISTER_16(I2C2_BASE + 0x00 )
#define I2C2_CR2		REGISTER_16(I2C2_BASE + 0x04 )
#define I2C2_OAR1		REGISTER_16(I2C2_BASE + 0x08 )
#define I2C2_OAR2		REGISTER_16(I2C2_BASE + 0x0c )
#define I2C2_DR 		REGISTER_16(I2C2_BASE + 0x10 )
#define I2C2_SR1		REGISTER_16(I2C2_BASE + 0x14 )
#define I2C2_SR2		REGISTER_16(I2C2_BASE + 0x18 )
#define I2C2_CCR		REGISTER_16(I2C2_BASE + 0x1c )
#define I2C2_TRISE	REGISTER_16(I2C2_BASE + 0x20 )

// USART1
#define USART1_SR		REGISTER_16(USART1_BASE + 0x00 )
#define USART1_DR		REGISTER_16(USART1_BASE + 0x04 )
#define USART1_BRR	REGISTER_16(USART1_BASE + 0x08 )
#define USART1_CR1	REGISTER_16(USART1_BASE + 0x0c )
#define USART1_CR2	REGISTER_16(USART1_BASE + 0x10 )
#define USART1_CR3	REGISTER_16(USART1_BASE + 0x14 )
#define USART1_GTPR	REGISTER_16(USART1_BASE + 0x18 )

// USART2
#define USART2_SR		REGISTER_16(USART2_BASE + 0x00 )
#define USART2_DR		REGISTER_16(USART2_BASE + 0x04 )
#define USART2_BRR	REGISTER_16(USART2_BASE + 0x08 )
#define USART2_CR1	REGISTER_16(USART2_BASE + 0x0c )
#define USART2_CR2	REGISTER_16(USART2_BASE + 0x10 )
#define USART2_CR3	REGISTER_16(USART2_BASE + 0x14 )
#define USART2_GTPR	REGISTER_16(USART2_BASE + 0x18 )

// USART3
#define USART3_SR		REGISTER_16(USART3_BASE + 0x00 )
#define USART3_DR		REGISTER_16(USART3_BASE + 0x04 )
#define USART3_BRR	REGISTER_16(USART3_BASE + 0x08 )
#define USART3_CR1	REGISTER_16(USART3_BASE + 0x0c )
#define USART3_CR2	REGISTER_16(USART3_BASE + 0x10 )
#define USART3_CR3	REGISTER_16(USART3_BASE + 0x14 )
#define USART3_GTPR	REGISTER_16(USART3_BASE + 0x18 )

// CEC
#define CEC_CFGR		REGISTER_16(CEC_BASE + 0x00 )
#define CEC_OAR			REGISTER_16(CEC_BASE + 0x04 )
#define CEC_PRE			REGISTER_16(CEC_BASE + 0x08 )
#define CEC_ESR			REGISTER_16(CEC_BASE + 0x0c )
#define CEC_CSR			REGISTER_16(CEC_BASE + 0x10 )
#define CEC_TXD			REGISTER_16(CEC_BASE + 0x14 )
#define CEC_RXD			REGISTER_16(CEC_BASE + 0x18 )

// DEBUG
#define DBGMCU_IDCODE	REGISTER_32( 0xe0042000 )
#define DBGMCU_CR			REGISTER_32( 0xe0042004 )

// Device electronic signature
#define F_SIZE			REGISTER_16( 0x1ffff7e0 )
#define U_ID1				REGISTER_32( 0x1ffff7e8 + 0 )
#define U_ID2				REGISTER_32( 0x1ffff7e8 + 4 )
#define U_ID3				REGISTER_32( 0x1ffff7e8 + 8 )


// Core peripherals
#define NVIC_BASE 	0xe000e100

// NVIC
#define ISER0		REGISTER_32(NVIC_BASE + 0)
#define ISER1		REGISTER_32(NVIC_BASE + 4)
#define ISER2		REGISTER_32(NVIC_BASE + 8)

#define ICER0		REGISTER_32(NVIC_BASE + 0x80)
#define ICER1	  REGISTER_32(NVIC_BASE + 0x84)
#define ICER2		REGISTER_32(NVIC_BASE + 0x88)

#define ISPR0		REGISTER_32(NVIC_BASE + 0x100)
#define ISPR1		REGISTER_32(NVIC_BASE + 0x104)
#define ISPR2		REGISTER_32(NVIC_BASE + 0x108)

#define ICPR0		REGISTER_32(NVIC_BASE + 0x180)
#define ICPR1		REGISTER_32(NVIC_BASE + 0x184)
#define ICPR2		REGISTER_32(NVIC_BASE + 0x188)

#define IABR0		REGISTER_32(NVIC_BASE + 0x200)
#define IABR1		REGISTER_32(NVIC_BASE + 0x204)
#define IABR2		REGISTER_32(NVIC_BASE + 0x208)

#define IPR00		REGISTER_32(NVIC_BASE + 0x300)
#define IPR01		REGISTER_32(NVIC_BASE + 0x304)
#define IPR02		REGISTER_32(NVIC_BASE + 0x308)
#define IPR03		REGISTER_32(NVIC_BASE + 0x30c)
#define IPR04		REGISTER_32(NVIC_BASE + 0x310)
#define IPR05		REGISTER_32(NVIC_BASE + 0x314)
#define IPR06		REGISTER_32(NVIC_BASE + 0x318)
#define IPR07		REGISTER_32(NVIC_BASE + 0x31c)
#define IPR08		REGISTER_32(NVIC_BASE + 0x320)
#define IPR09		REGISTER_32(NVIC_BASE + 0x324)
#define IPR10		REGISTER_32(NVIC_BASE + 0x328)
#define IPR11		REGISTER_32(NVIC_BASE + 0x32c)
#define IPR12		REGISTER_32(NVIC_BASE + 0x330)
#define IPR13		REGISTER_32(NVIC_BASE + 0x334)
#define IPR14		REGISTER_32(NVIC_BASE + 0x338)
#define IPR15		REGISTER_32(NVIC_BASE + 0x33c)
#define IPR16		REGISTER_32(NVIC_BASE + 0x340)

#define STK_BASE	0xe000e010


// STK - some registers doubly defined
// so that naming convention satisfies that used in different STM documents
#define STK_CSR		REGISTER_32(STK_BASE + 0)
#define STK_CTRL	REGISTER_32(STK_BASE + 0)

#define STK_RVR		REGISTER_32(STK_BASE + 4)
#define STK_LOAD	REGISTER_32(STK_BASE + 4)

#define STK_CVR		REGISTER_32(STK_BASE + 8)
#define STK_VAL		REGISTER_32(STK_BASE + 8)

#define STK_CALIB	REGISTER_32(STK_BASE + 0x0c)

// SCB
// 
#define SCB_BASE	0xe000ed00

#define CPUID		REGISTER_32(SCB_BASE + 0)
#define ACTRLR	REGISTER_32(0xe000e008)

#define ICSR		REGISTER_32(SCB_BASE + 4)
#define VTOR		REGISTER_32(SCB_BASE + 8)
#define AIRCR		REGISTER_32(SCB_BASE + 0x0c)
#define SCR		REGISTER_32(SCB_BASE + 0x10)
#define CCR		REGISTER_32(SCB_BASE + 0x14)
#define SHPR1		REGISTER_32(SCB_BASE + 0x18)
#define SHPR2		REGISTER_32(SCB_BASE + 0x1c)
#define SHPR3		REGISTER_32(SCB_BASE + 0x20)
#define SHCRS		REGISTER_32(SCB_BASE + 0x24)
#define CFSR		REGISTER_32(SCB_BASE + 0x28)
#define HFSR		REGISTER_32(SCB_BASE + 0x2c)
#define MMAR		REGISTER_32(SCB_BASE + 0x34)
#define BFAR		REGISTER_32(SCB_BASE + 0x38)
